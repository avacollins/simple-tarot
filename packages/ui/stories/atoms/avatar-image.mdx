import { Canvas, Meta } from '@storybook/addon-docs/blocks';
import * as AvatarImageStories from './avatar-image.stories';

<Meta of={AvatarImageStories.default} title='AvatarImage'/>

# AvatarImage Component

Uses the hook `useAvatarImage` to get the image URL and other properties from the core-api app.

## Overview

- Uses `useAvatarImage` hook to fetch random image URL from the core-api.
- Displays the image with a specified size inside a round black border.
- Press on the image to generate a new random image.
- [TODO]: 
    - Add long press functionality to save the image URL to user profile.

<Canvas of={AvatarImageStories.Primary} />

## Props

- `size`: Size of the avatar image, default is `xlarge`.
- `saved`: Boolean prop to indicate if the image is saved or not. If true, the image will load from saved url and not fetch a random one from the core-api.

## State

- `hasSaved`: Initializes to evaluation of `saved` prop; it will only be set on component load or if `saved` prop changes.
- `displayImage`: The image url being displayed in the component view. If the avatar image is pressed and a new image appears it is only set in
the component `displayImage` state. If continue to press the image will continue to change the image URL.
- `useAvatarImage`: Hook that fetches the image URL from the core-api; 
`    returns { avatarImage, error, getAvatarImage, getNewAvatarImage, saveAvatarImage };`

<img src={(location.hostname === 'avacollins.github.io'? `/simple-tarot/avatar-image-display-state.png`: '/avatar-image-display-state.png')} alt="AvatarImage display state" width="600"/>


## Future Enhancements

- UX treatment to inform user of the press to generate new image feature.
- Add functionality to save the image URL to user profile on long press.